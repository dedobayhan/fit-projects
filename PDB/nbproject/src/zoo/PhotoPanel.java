/**
 *  Project:  PDB 2008
 *  Authors:  Ondrej Lengal,   xlenga00@stud.fit.vutbr.cz
 *            Libor Polcak,    xpolca03@stud.fit.vutbr.cz
 *            Boris Prochazka, xproch63@stud.fit.vutbr.cz
 *            Petr Zemek,      xzemek02@stud.fit.vutbr.cz
 *
 * @brief Photo panel class.
 *
 */
package zoo;

import java.awt.Graphics;
import java.awt.image.BufferedImage;

/**
 * @brief Photo panel.
 */
public class PhotoPanel extends javax.swing.JPanel {

	/// Back buffer.
	private BufferedImage _backBuffer;

	/// Front buffer.
	private BufferedImage _frontBuffer;

	/**
	 * @brief Default constructor.
	 */
	public PhotoPanel() {
		initComponents();
	}

	/**
	 * @brief Method that initializes drawing.
	 *
	 * This method initializes the back buffer, and it needs to be called before
	 * drawing anything.
	 */
	public void startDrawing() {
		_backBuffer = new BufferedImage(getWidth(), getHeight(),
				BufferedImage.TYPE_INT_ARGB);
	}

	/**
	 * @brief Method that ends drawing.
	 *
	 * This method ends drawing into a back buffer and switches the front buffer
	 * with the back buffer.
	 */
	public void endDrawing() {
		// Swap the back buffer with the front buffer
		_frontBuffer = _backBuffer;
		_backBuffer = null;

		// Invalidate the client area
		repaint();
	}

	@Override
	public void paint(Graphics g) {
		// Call the predecesor
		super.paint(g);

		if (_frontBuffer != null) {
			g.drawImage(_frontBuffer, 0, 0, null);
		}
	}

	/**
	 * @brief Displays selected photo.
	 *
	 * @param[in] photo Photo to be displayed.
	 *
	 * startDrawing() must be called before this metod is called.
	 * If photo is null, default photo will be shown.
	 */
	public void displayPhoto(BufferedImage photo) {
		Graphics graphics = _backBuffer.getGraphics();
		if (photo != null) {
			graphics.drawImage(photo,
					0, 0, getWidth(), getHeight(), // dst area
					0, 0, photo.getWidth(), photo.getHeight(), // src area
					null);
		}
	}

	/** This method is called from within the constructor to
	 * initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is
	 * always regenerated by the Form Editor.
	 */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        setName("Form"); // NOI18N

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 112, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 106, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    // End of variables declaration//GEN-END:variables

}
